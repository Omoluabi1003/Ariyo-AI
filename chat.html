<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Àríyọ̀ AI Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #000;
            margin: 0;
            padding: 0;
            overflow: hidden;
            transition: background 0.3s ease-in-out;
        }

        .chat-container {
            width: 100vw;
            height: 100vh;
            display: flex; /* Flexbox for alignment */
            justify-content: center;
            align-items: center;
            background: #111;
            transition: height 0.3s ease-in-out;
            position: relative;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .button-container {
            position: fixed;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: column; /* Stack buttons vertically */
            gap: 15px; /* Space between buttons */
            z-index: 100; /* Higher z-index for chat */
        }

        .button {
            background: linear-gradient(135deg, #ff7e5f, #feb47b);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
            transition: background 0.3s, transform 0.2s, box-shadow 0.3s;
        }

        .button:hover {
            background: linear-gradient(135deg, #feb47b, #ff7e5f);
            transform: scale(1.1);
            box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.4);
        }

        /* Media query to adjust button positioning on mobile */
        @media screen and (max-width: 768px) {
            .button-container {
                top: 5px;
                right: 5px;
                gap: 10px; /* Reduced space between buttons on mobile */
            }
        }
    </style>
</head>
<body>
    <!-- Chat container -->
    <div class="chat-container" id="chatContainer">
        <iframe id="chatbot" src="https://interfaces.zapier.com/embed/chatbot/cm7s2oyu2000b3vmuwcwkj9kn" title="Àríyọ̀ AI Chat"></iframe>
    </div>

    <!-- Back to Landing Page Button in chat.html -->
    <button class="button back-to-landing" onclick="goBackToLanding()">Back to Landing Page</button>

    <!-- Button container for mute and close actions -->
    <div class="button-container">
        <!-- Close button for the chat -->
        <button class="button close-button" onclick="closeChat()" aria-label="Close chat"><i class="fa-solid fa-xmark"></i></button>
        <!-- Mute button for the music -->
        <button class="button mute-button" id="muteButton" onclick="toggleMute()" aria-label="Mute or unmute music"><i class="fa-solid fa-volume-high"></i></button>
    </div>

    <script>
        let isMuted = false;
        const tracks = [
            "A Very Good Bad Guy v3.mp3",
            "Dem Wan Shut Me Up.mp3",
            "EFCC.mp3",
            "Emergency.mp3",
            "Film Trick Election.mp3",
            "Gbas Gbos.mp3",
            "Kindness (Remastered).mp3",
            "Locked Away.mp3",
            "Multi choice palav.mp3",
            "Na My Turn.mp3",
            "Ogoni Anthem (Remastered).mp3",
            "Ogoni Anthem.mp3",
            "Rich Pauper.mp3",
            "Senator Natasha’s Whisper.mp3",
            "Sharing Formula.mp3",
            "Show Of Shame v3 (Remastered).mp3",
            "Subsidy.mp3",
            "Vex Money.mp3",
            "Working on myself.mp3"
        ];

        function shuffleTracks() {
            for (let i = tracks.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [tracks[i], tracks[j]] = [tracks[j], tracks[i]]; // Swap elements
            }
        }

        function playRandomTrack() {
            const trackName = tracks[0]; // Get the first track from the shuffled array
            const trackURL = `https://raw.githubusercontent.com/Omoluabi1003/Ariyo-AI/main/${trackName}`;
            const musicPlayer = document.getElementById("musicPlayer");
            const trackSource = document.getElementById("trackSource");

            trackSource.src = trackURL;
            musicPlayer.load();
            musicPlayer.play();
        }

        document.getElementById('musicPlayer').addEventListener('ended', function() {
            shuffleTracks(); // Shuffle tracks before playing the next one
            playRandomTrack();
        });

        window.onload = function() {
            shuffleTracks(); // Shuffle tracks on page load
            playRandomTrack(); // Play the first track from the shuffled list
        }

        function openChat() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.style.display = 'flex';
            document.querySelector('.button').style.display = 'none';
            localStorage.setItem('chatClosed', 'false');
        }

        function closeChat() {
            document.getElementById('chatContainer').style.display = 'none';
            document.querySelector('.button').style.display = 'block';
            localStorage.setItem('chatClosed', 'true');
        }

        function toggleMute() {
            const muteButton = document.getElementById("muteButton");
            const musicPlayer = document.getElementById("musicPlayer");
            if (isMuted) {
                musicPlayer.play();
                muteButton.innerHTML = '<i class="fa-solid fa-volume-high"></i>';
            } else {
                musicPlayer.pause();
                muteButton.innerHTML = '<i class="fa-solid fa-volume-xmark"></i>';
            }
            isMuted = !isMuted;
        }

        function changeTrack() {
            const trackSelector = document.getElementById('trackSelector');
            const trackName = trackSelector.value;
            const trackURL = `https://raw.githubusercontent.com/Omoluabi1003/Ariyo-AI/main/${trackName}`;
            const musicPlayer = document.getElementById("musicPlayer");
            const trackSource = document.getElementById("trackSource");

            trackSource.src = trackURL;
            musicPlayer.load();
            musicPlayer.play();
        }

        // Redirect to the landing page (index.html)
        function goBackToLanding() {
            window.location.href = 'index.html';  // Replace with the path to your index.html
        }
    </script>
</body>
</html>
