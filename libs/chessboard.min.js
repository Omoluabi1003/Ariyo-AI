/*! chessboard.js v1.0.0 | (c) 2019 Chris Oakman | MIT License chessboardjs.com/license */
!function(){"use strict";var V=window.jQuery,Z="abcdefgh".split(""),o=20,_="â€¦",ee="1.8.3",e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",re=fe(e),n=200,t=200,a=60,s=30,i=100,oe={};function ne(e,r,o){function n(){a=0,s&&(s=!1,i())}var t,a=0,s=!1,i=function(){a=window.setTimeout(n,r),e.apply(o,t)};return function(e){t=arguments,a?s=!0:i()}}function te(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,function(e){return(16*Math.random()|0).toString(16)})}function ae(e){return JSON.parse(JSON.stringify(e))}function p(e){e=e.split(".");return{major:parseInt(e[0],10),minor:parseInt(e[1],10),patch:parseInt(e[2],10)}}function se(e,r){for(var o in r)if(r.hasOwnProperty(o))for(var n="{"+o+"}",t=r[o];-1!==e.indexOf(n);)e=e.replace(n,t);return e}function ie(e){return"string"==typeof e}function pe(e){return"function"==typeof e}function c(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function l(e){return"fast"===e||"slow"===e||c(e)&&0<=e}function ce(e){return ie(e)&&-1!==e.search(/^[a-h][1-8]$/)}function u(e){return ie(e)&&-1!==e.search(/^[bw][KQRNBP]$/)}function le(e){if(!ie(e))return!1;var r=(e=(e=e.replace(/ .+$/,"")).replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")).split("/");if(8!==r.length)return!1;for(var o=0;o<8;o++)if(8!==r[o].length||-1!==r[o].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}function ue(e){if(!V.isPlainObject(e))return!1;for(var r in e)if(e.hasOwnProperty(r)&&(!ce(r)||!u(e[r])))return!1;return!0}function de(){return window.$,V.fn&&V.fn.jquery&&(e=V.fn.jquery,r=ee,e=p(e),r=p(r),e=1e5*e.major*1e5+1e5*e.minor+e.patch,1e5*r.major*1e5+1e5*r.minor+r.patch<=e);var e,r}function fe(e){if(!le(e))return!1;for(var r,o=(e=e.replace(/ .+$/,"")).split("/"),n={},t=8,a=0;a<8;a++){for(var s=o[a].split(""),i=0,p=0;p<s.length;p++)-1!==s[p].search(/[1-8]/)?i+=parseInt(s[p],10):(n[Z[i]+t]=(r=s[p]).toLowerCase()===r?"b"+r.toUpperCase():"w"+r.toUpperCase(),i+=1);t-=1}return n}function he(e){if(!ue(e))return!1;for(var r="",o=8,n=0;n<8;n++){for(var t=0;t<8;t++){var a=Z[t]+o;e.hasOwnProperty(a)?r+="w"===(a=(a=e[a]).split(""))[0]?a[1].toUpperCase():a[1].toLowerCase():r+="1"}7!==n&&(r+="/"),o-=1}return r=r.replace(/11111111/g,"8").replace(/1111111/g,"7").replace(/111111/g,"6").replace(/11111/g,"5").replace(/1111/g,"4").replace(/111/g,"3").replace(/11/g,"2")}function ge(e,r,o){for(var n=function(e){for(var r=[],o=0;o<8;o++)for(var n=0;n<8;n++){var t=Z[o]+(n+1);e!==t&&r.push({square:t,distance:function(e,r){var e=e.split(""),o=Z.indexOf(e[0])+1,e=parseInt(e[1],10),r=r.split(""),n=Z.indexOf(r[0])+1,r=parseInt(r[1],10),o=Math.abs(o-n);return(n=Math.abs(e-r))<=o?o:n}(e,t)})}r.sort(function(e,r){return e.distance-r.distance});var a=[];for(o=0;o<r.length;o++)a.push(r[o].square);return a}(o),t=0;t<n.length;t++){var a=n[t];if(e.hasOwnProperty(a)&&e[a]===r)return a}return!1}function Pe(e){var r;return"black"!==e.orientation&&(e.orientation="white"),!1!==e.showNotation&&(e.showNotation=!0),!0!==e.draggable&&(e.draggable=!1),"trash"!==e.dropOffBoard&&(e.dropOffBoard="snapback"),!0!==e.sparePieces&&(e.sparePieces=!1),e.sparePieces&&(e.draggable=!0),e.hasOwnProperty("pieceTheme")&&(ie(e.pieceTheme)||pe(e.pieceTheme))||(e.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),l(e.appearSpeed)||(e.appearSpeed=n),l(e.moveSpeed)||(e.moveSpeed=t),l(e.snapbackSpeed)||(e.snapbackSpeed=a),l(e.snapSpeed)||(e.snapSpeed=s),l(e.trashSpeed)||(e.trashSpeed=i),c(r=e.dragThrottleRate)&&1<=r||(e.dragThrottleRate=o),e}oe.alpha="alpha-d2270",oe.black="black-3c85d",oe.board="board-b72b1",oe.chessboard="chessboard-63f37",oe.clearfix="clearfix-7da63",oe.highlight1="highlight1-32417",oe.highlight2="highlight2-9c5d2",oe.notation="notation-322f9",oe.numeric="numeric-fc462",oe.piece="piece-417db",oe.row="row-5277c",oe.sparePieces="spare-pieces-7492f",oe.sparePiecesBottom="spare-pieces-bottom-ae20f",oe.sparePiecesTop="spare-pieces-top-4028b",oe.square="square-55d63",oe.white="white-1e1d7",console.assert("abc"===se("abc",{a:"x"})),console.assert("{a}bc"===se("{a}bc",{})),console.assert("{a}bc"===se("{a}bc",{p:"q"})),console.assert("xbc"===se("{a}bc",{a:"x"})),console.assert("xbcxbc"===se("{a}bc{a}bc",{a:"x"})),console.assert("xxy"===se("{a}{a}{b}",{a:"x",b:"y"})),console.assert(ce("a1")),console.assert(ce("e2")),console.assert(!ce("D2")),console.assert(!ce("g9")),console.assert(!ce("a")),console.assert(!0),console.assert(!0),console.assert(!ce({})),console.assert(u("bP")),console.assert(u("bK")),console.assert(u("wK")),console.assert(u("wR")),console.assert(!u("WR")),console.assert(!u("Wr")),console.assert(!u("a")),console.assert(!0),console.assert(!0),console.assert(!u({})),console.assert(le(e)),console.assert(le("8/8/8/8/8/8/8/8")),console.assert(le("r1bqkbnr/pppp1ppp/2n5/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R")),console.assert(le("3r3r/1p4pp/2nb1k2/pP3p2/8/PB2PN2/p4PPP/R4RK1 b - - 0 1")),console.assert(!le("3r3z/1p4pp/2nb1k2/pP3p2/8/PB2PN2/p4PPP/R4RK1 b - - 0 1")),console.assert(!le("anbqkbnr/8/8/8/8/8/PPPPPPPP/8")),console.assert(!le("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/")),console.assert(!le("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBN")),console.assert(!le("888888/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR")),console.assert(!le("888888/pppppppp/74/8/8/8/PPPPPPPP/RNBQKBNR")),console.assert(!le({})),console.assert(ue(re)),console.assert(ue({})),console.assert(ue({e2:"wP"})),console.assert(ue({e2:"wP",d2:"wP"})),console.assert(!ue({e2:"BP"})),console.assert(!ue({y2:"wP"})),console.assert(!ue(null)),console.assert(!ue("start")),console.assert(!ue(e)),console.assert(he(re)===e),console.assert("8/8/8/8/8/8/8/8"===he({})),console.assert("8/8/8/8/8/8/Pp6/8"===he({a2:"wP",b2:"bP"})),window.Chessboard=function(e,p){if(!function(){if(de())return 1;window.alert("Chessboard Error 1005: Unable to find a valid version of jQuery. Please include jQuery "+ee+" or higher on the page\n\nExiting"+_)}())return null;var o=""===(e=e)?(window.alert("Chessboard Error 1001: The first argument to Chessboard() cannot be an empty string.\n\nExiting"+_),!1):(ie(e)&&"#"!==e.charAt(0)&&(e="#"+e),1!==(e=V(e)).length?(window.alert("Chessboard Error 1003: The first argument to Chessboard() must be the ID of a DOM node, an ID query selector, or a single DOM node.\n\nExiting"+_),!1):e);if(!o)return null;"start"===(e=p)?e={position:ae(re)}:le(e)?e={position:fe(e)}:ue(e)&&(e={position:ae(e)}),p=Pe(p=e=V.isPlainObject(e)?e:{});var r=null,a=null,n=null,t=null,s={},i=2,c="white",l={},u=null,d=null,f=null,h=!1,g={},P={},v={},b=16;function w(e,r,o){var n;!0===p.hasOwnProperty("showErrors")&&!1!==p.showErrors&&(n="Chessboard Error "+e+": "+r,"console"===p.showErrors&&"object"==typeof console&&"function"==typeof console.log?(console.log(n),2<=arguments.length&&console.log(o)):"alert"===p.showErrors?(o&&(n+="\n\n"+JSON.stringify(o)),window.alert(n)):pe(p.showErrors)&&p.showErrors(e,r,o))}function m(e){return pe(p.pieceTheme)?p.pieceTheme(e):ie(p.pieceTheme)?se(p.pieceTheme,{piece:e}):(w(8272,"Unable to build image source for config.pieceTheme."),"")}function y(e,r,o){var n='<img src="'+m(e)+'" ';return ie(o)&&""!==o&&(n+='id="'+o+'" '),n+='alt="" class="{piece}" data-piece="'+e+'" style="width:'+b+"px;height:"+b+"px;",r&&(n+="display:none;"),se(n+='" />',oe)}function x(e){for(var r=["wK","wQ","wR","wB","wN","wP"],o=("black"===e&&(r=["bK","bQ","bR","bB","bN","bP"]),""),n=0;n<r.length;n++)o+=y(r[n],!1,g[r[n]]);return o}function j(e,r,o){if(0!==e.length)for(var n=0,t=0;t<e.length;t++){var a=e[t];"clear"===a.type?V("#"+P[a.square]+" ."+oe.piece).fadeOut(p.trashSpeed,s):"add"!==a.type||p.sparePieces?"add"===a.type&&p.sparePieces?function(e,r,o){var n=V("#"+g[e]).offset(),t=V("#"+P[r]),r=t.offset(),a=te(),s=(V("body").append(y(e,!0,a)),V("#"+a));s.css({display:"",position:"absolute",left:n.left,top:n.top}),a={duration:p.moveSpeed,complete:function(){t.find("."+oe.piece).remove(),t.append(y(e)),s.remove(),pe(o)&&o()}},s.animate(r,a)}(a.piece,a.square,s):"move"===a.type&&function(e,r,o,n){var t=(e=V("#"+P[e])).offset(),a=V("#"+P[r]),r=a.offset(),s=te(),i=(V("body").append(y(o,!0,s)),V("#"+s));i.css({display:"",position:"absolute",top:t.top,left:t.left}),e.find("."+oe.piece).remove(),s={duration:p.moveSpeed,complete:function(){a.append(y(o)),i.remove(),pe(n)&&n()}},i.animate(r,s)}(a.source,a.destination,a.piece,s):V("#"+P[a.square]).append(y(a.piece,!0)).find("."+oe.piece).fadeIn(p.appearSpeed,s)}function s(){(n+=1)===e.length&&(O(),pe(p.onMoveEnd))&&p.onMoveEnd(ae(r),ae(o))}}function O(){for(var e in r.find("."+oe.piece).remove(),l)l.hasOwnProperty(e)&&V("#"+P[e]).append(y(l[e]))}function q(){r.html(function(e){"black"!==e&&(e="white");for(var r="",o=ae(Z),n=8,t=("black"===e&&(o.reverse(),n=1),"white"),a=0;a<8;a++){r+='<div class="{row}">';for(var s=0;s<8;s++){var i=o[s]+n;r+='<div class="{square} '+oe[t]+" square-"+i+'" style="width:'+b+"px;height:"+b+'px;" id="'+P[i]+'" data-square="'+i+'">',p.showNotation&&(("white"===e&&1===n||"black"===e&&8===n)&&(r+='<div class="{notation} {alpha}">'+o[s]+"</div>"),0===s)&&(r+='<div class="{notation} {numeric}">'+n+"</div>"),r+="</div>",t="white"===t?"black":"white"}r+='<div class="{clearfix}"></div></div>',t="white"===t?"black":"white","white"===e?n-=1:n+=1}return se(r,oe)}(c,p.showNotation)),O(),p.sparePieces&&("white"===c?(n.html(x("black")),t.html(x("white"))):(n.html(x("white")),t.html(x("black"))))}function k(e){var r=ae(l),o=ae(e);he(r)!==he(o)&&(pe(p.onChange)&&p.onChange(r,o),l=e)}function S(e,r){for(var o in v)if(v.hasOwnProperty(o)){var n=v[o];if(e>=n.left&&e<n.left+b&&r>=n.top&&r<n.top+b)return o}return"offboard"}function T(){r.find("."+oe.square).removeClass(oe.highlight1+" "+oe.highlight2)}function B(){T();var e=ae(l);delete e[f],k(e),O(),a.fadeOut(p.trashSpeed),h=!1}function C(e,r,o,n){if(!pe(p.onDragStart)||!1!==p.onDragStart(e,r,ae(l),c)){for(var t in h=!0,u=r,d="spare"===(f=e)?"offboard":e,v={},P)P.hasOwnProperty(t)&&(v[t]=V("#"+P[t]).offset());a.attr("src",m(r)).css({display:"",position:"absolute",left:o-b/2,top:n-b/2}),"spare"!==e&&V("#"+P[e]).addClass(oe.highlight1).find("."+oe.piece).css("display","none")}}function E(e,r){a.css({left:e-b/2,top:r-b/2});e=S(e,r);e!==d&&(ce(d)&&V("#"+P[d]).removeClass(oe.highlight2),ce(e)&&V("#"+P[e]).addClass(oe.highlight2),pe(p.onDragMove)&&p.onDragMove(e,d,f,u,ae(l),c),d=e)}function D(e){var r,o,n,t="drop";"offboard"===e&&"snapback"===p.dropOffBoard&&(t="snapback"),"offboard"===e&&"trash"===p.dropOffBoard&&(t="trash"),pe(p.onDrop)&&(n=ae(l),"spare"===f&&ce(e)&&(n[e]=u),ce(f)&&"offboard"===e&&delete n[f],ce(f)&&ce(e)&&(delete n[f],n[e]=u),o=ae(l),"snapback"!==(n=p.onDrop(f,e,u,n,o,c))&&"trash"!==n||(t=n)),"snapback"===t?"spare"===f?B():(T(),o=V("#"+P[f]).offset(),n={duration:p.snapbackSpeed,complete:function(){O(),a.css("display","none"),pe(p.onSnapbackEnd)&&p.onSnapbackEnd(u,f,ae(l),c)}},a.animate(o,n),h=!1):"trash"===t?B():"drop"===t&&(r=e,T(),delete(t=ae(l))[f],t[r]=u,k(t),t=V("#"+P[r]).offset(),e={duration:p.snapSpeed,complete:function(){O(),a.css("display","none"),pe(p.onSnapEnd)&&p.onSnapEnd(f,r,u)}},a.animate(t,e),h=!1)}function Q(e){e.preventDefault()}function X(e){var r;p.draggable&&ce(r=V(this).attr("data-square"))&&l.hasOwnProperty(r)&&C(r,l[r],e.pageX,e.pageY)}function Y(e){var r;p.draggable&&ce(r=V(this).attr("data-square"))&&l.hasOwnProperty(r)&&(e=e.originalEvent,C(r,l[r],e.changedTouches[0].pageX,e.changedTouches[0].pageY))}function L(e){p.sparePieces&&C("spare",V(this).attr("data-piece"),e.pageX,e.pageY)}function U(e){p.sparePieces&&C("spare",V(this).attr("data-piece"),(e=e.originalEvent).changedTouches[0].pageX,e.changedTouches[0].pageY)}s.clear=function(e){s.position({},e)},s.destroy=function(){o.html(""),a.remove(),o.unbind()},s.fen=function(){return s.position("fen")},s.flip=function(){return s.orientation("flip")},s.move=function(){if(0!==arguments.length){for(var e,r=!0,o={},n=0;n<arguments.length;n++)!1===arguments[n]?r=!1:(ie(e=arguments[n])&&2===(e=e.split("-")).length?ce(e[0])&&ce(e[1]):void 0)?o[(e=arguments[n].split("-"))[0]]=e[1]:w(2826,"Invalid move passed to the move method.",arguments[n]);var t=function(e,r){var o,n,t=ae(e);for(o in r)r.hasOwnProperty(o)&&t.hasOwnProperty(o)&&(n=t[o],delete t[o],t[r[o]]=n);return t}(l,o);return s.position(t,r),t}},s.orientation=function(e){return 0===arguments.length?c:"white"===e||"black"===e?(c=e,q(),c):"flip"===e?(c="white"===c?"black":"white",q(),c):void w(5482,"Invalid value passed to the orientation method.",e)},s.position=function(e,r){return 0===arguments.length?ae(l):ie(e)&&"fen"===e.toLowerCase()?he(l):void(ue(e=le(e=ie(e)&&"start"===e.toLowerCase()?ae(re):e)?fe(e):e)?(r=!1!==r?!0:r)?(j(function(e,r){e=ae(e);var o,n,t=[],a={};for(o in r=ae(r))r.hasOwnProperty(o)&&e.hasOwnProperty(o)&&e[o]===r[o]&&(delete e[o],delete r[o]);for(o in r)r.hasOwnProperty(o)&&(n=ge(e,r[o],o))&&(t.push({type:"move",source:n,destination:o,piece:r[o]}),delete e[n],delete r[o],a[o]=!0);for(o in r)r.hasOwnProperty(o)&&(t.push({type:"add",square:o,piece:r[o]}),delete r[o]);for(o in e)!e.hasOwnProperty(o)||a.hasOwnProperty(o)||(t.push({type:"clear",square:o,piece:e[o]}),delete e[o]);return t}(l,e),l,e),k(e)):(k(e),O()):w(6482,"Invalid value passed to the position method.",e))},s.resize=function(){b=function(){var e=parseInt(o.width(),10);if(!e||e<=0)return 0;for(var r=e-1;r%8!=0&&0<r;)r-=1;return r/8}(),r.css("width",8*b+"px"),a.css({height:b,width:b}),p.sparePieces&&o.find("."+oe.sparePieces).css("paddingLeft",b+i+"px"),q()},s.start=function(e){s.position("start",e)},e=ne(function(e){h&&E(e.pageX,e.pageY)},p.dragThrottleRate);var $=ne(function(e){h&&(e.preventDefault(),E(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))},p.dragThrottleRate);function z(e){h&&D(S(e.pageX,e.pageY))}function J(e){h&&D(S(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function W(e){var r;h||pe(p.onMouseoverSquare)&&ce(e=V(e.currentTarget).attr("data-square"))&&(r=!1,l.hasOwnProperty(e)&&(r=l[e]),p.onMouseoverSquare(e,r,ae(l),c))}function F(e){var r;h||pe(p.onMouseoutSquare)&&ce(e=V(e.currentTarget).attr("data-square"))&&(r=!1,l.hasOwnProperty(e)&&(r=l[e]),p.onMouseoutSquare(e,r,ae(l),c))}c=p.orientation,p.hasOwnProperty("position")&&("start"===p.position?l=ae(re):le(p.position)?l=fe(p.position):ue(p.position)?l=ae(p.position):w(7263,"Invalid value passed to config.position.",p.position));for(var N=0;N<Z.length;N++)for(var R=1;R<=8;R++){var A=Z[N]+R;P[A]=A+"-"+te()}for(var I="KQRNBP".split(""),N=0;N<I.length;N++){var G="w"+I[N],H="b"+I[N];g[G]=G+"-"+te(),g[H]=H+"-"+te()}o.html((M=p.sparePieces,K='<div class="{chessboard}">',M&&(K+='<div class="{sparePieces} {sparePiecesTop}"></div>'),K+='<div class="{board}"></div>',M&&(K+='<div class="{sparePieces} {sparePiecesBottom}"></div>'),se(K+="</div>",oe))),r=o.find("."+oe.board),p.sparePieces&&(n=o.find("."+oe.sparePiecesTop),t=o.find("."+oe.sparePiecesBottom));var K,M=te();return V("body").append(y("wP",!0,M)),a=V("#"+M),i=parseInt(r.css("borderLeftWidth"),10),s.resize(),V("body").on("mousedown mousemove","."+oe.piece,Q),r.on("mousedown","."+oe.square,X),o.on("mousedown","."+oe.sparePieces+" ."+oe.piece,L),r.on("mouseenter","."+oe.square,W).on("mouseleave","."+oe.square,F),(K=V(window)).on("mousemove",e).on("mouseup",z),"ontouchstart"in document.documentElement&&(r.on("touchstart","."+oe.square,Y),o.on("touchstart","."+oe.sparePieces+" ."+oe.piece,U),K.on("touchmove",$).on("touchend",J)),s},window.ChessBoard=window.Chessboard,window.Chessboard.fenToObj=fe,window.Chessboard.objToFen=he}(),"undefined"!=typeof exports&&(exports.Chessboard=window.Chessboard);