<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√Är√≠y√≤ AI - Smart Naija AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js">function toggleDarkMode() {
    document.body.classList.toggle("light-mode");
    localStorage.setItem("darkMode", document.body.classList.contains("light-mode") ? "on" : "off");
}

document.addEventListener("DOMContentLoaded", () => {
    if (localStorage.getItem("darkMode") === "on") {
        document.body.classList.add("light-mode");
    }
});

function shareSite() {
    if (navigator.share) {
        navigator.share({
            title: '√Är√≠y√≤ AI',
            text: 'Check out this amazing AI-powered website!',
            url: window.location.href
        }).catch(error => console.error('Share failed:', error));
    } else {
        alert('Sharing not supported on this device.');
    }
}

document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("mute-button").addEventListener("click", toggleMute);
});
function toggleMute() {
    let audio = document.getElementById("background-music");
    let muteButton = document.getElementById("mute-button").querySelector("i");
    audio.muted = !audio.muted;
    muteButton.classList.toggle("fa-volume-up", !audio.muted);
    muteButton.classList.toggle("fa-volume-mute", audio.muted);
}

async function fetchNaijaNews() {
    document.getElementById("news-loader").style.display = "block";
    document.getElementById("news-content").style.display = "none";
    const RSS_SOURCES = [
        "https://www.premiumtimesng.com/feed",
        "https://www.vanguardngr.com/feed/",
        "https://rss.punchng.com/v1/category/latest_news"
    ];
    let newsHTML = "<h2>Latest Naija News</h2>";
    for (let rssUrl of RSS_SOURCES) {
        try {
            let response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`);
            let data = await response.json();
            if (data.items && data.items.length > 0) {
                data.items.slice(0, 3).forEach(news => {
                    newsHTML += `<div class='news-item'><a href="${news.link}" target="_blank">${news.title}</a>
                    <p>üïõ ${new Date(news.pubDate).toLocaleString()}</p></div>`;
                });
            }
        } catch (error) {
            console.error("RSS Feed Error:", error);
        }
    }
    document.getElementById("news-content").innerHTML = newsHTML;
    document.getElementById("news-loader").style.display = "none";
    document.getElementById("news-content").style.display = "block";
}

document.addEventListener("DOMContentLoaded", () => {
    fetchNaijaNews();
});

setInterval(fetchNaijaNews, 1800000);

async function findAndPlayAudio() {
    let audio = document.getElementById("background-music");
    let audioSource = document.getElementById("audio-source");
    try {
        let response = await fetch(".");
        let text = await response.text();
        let parser = new DOMParser();
        let doc = parser.parseFromString(text, "text/html");
        let files = Array.from(doc.querySelectorAll("a"))
            .map(a => a.href)
            .filter(href => href.endsWith(".mp3"));
        
        if (files.length > 0) {
            audioSource.src = files[0];
            audio.load();
            audio.play().catch(() => console.log("Autoplay blocked. User must interact."));
        } else {
            console.log("No MP3 files found.");
        }
    } catch (error) {
        console.error("Error fetching MP3 files:", error);
    }
}

document.addEventListener("DOMContentLoaded", findAndPlayAudio);
document.addEventListener("DOMContentLoaded", () => {
    if (localStorage.getItem("darkMode") === "on") {
        document.body.classList.add("light-mode");
        document.querySelector(".icon-button i").classList.replace("fa-moon", "fa-sun");
    }
});

function toggleDarkMode() {
    document.body.classList.toggle("light-mode");
    let isDarkMode = document.body.classList.contains("light-mode");
    localStorage.setItem("darkMode", isDarkMode ? "on" : "off");
    document.querySelector(".icon-button i").classList.toggle("fa-moon", !isDarkMode);
    document.querySelector(".icon-button i").classList.toggle("fa-sun", isDarkMode);
}
document.getElementById("share-button").addEventListener("click", shareSite);
</script>
    <style>
        :root {
            --bg-color: #0f172a;
            --text-color: white;
            --card-bg: rgba(255, 255, 255, 0.1);
            --border-color: rgba(255, 255, 255, 0.3);
            --gradient: linear-gradient(135deg, #1e293b, #0f172a);
            --glass: rgba(255, 255, 255, 0.2);
        }

        body.light-mode {
            --bg-color: #f9fafb;
            --text-color: #111;
            --card-bg: rgba(0, 0, 0, 0.1);
            --border-color: #666;
            --gradient: linear-gradient(135deg, #e2e8f0, #f8fafc);
        }

        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background: var(--gradient);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            justify-content: center;
            overflow-y: auto;
            transition: background 0.5s, color 0.5s;
        }

        .top-icons {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
        }

        .icon-button {
            border: 2px solid var(--border-color);
            background: none;
            color: var(--text-color);
            font-size: 16px;
            cursor: pointer;
            padding: 5px;
            border-radius: 8px;
            transition: background 0.3s, transform 0.2s;
        }

        .icon-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.2);
        }

        .chat-container {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 5px;
            background: var(--glass);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            transition: transform 0.2s, background 0.3s;
        }

        .chat-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .chatbox {
            position: fixed;
            top: 2%;
            left: 2%;
            width: 96%;
            height: 96%;
            background: var(--glass);
            border: 5px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
        }

        .chatbox iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="top-icons">
        <button class="icon-button" onclick="toggleDarkMode()"><i class="fas fa-moon"></i></button>
        <button class="icon-button" id="share-button"><i class="fas fa-share-alt"></i></button>
        <button class="icon-button" id="mute-button" onclick="toggleMute()"><i class="fas fa-volume-mute"></i></button>
    </div>
    
    <h1>Welcome to √Är√≠y√≤ AI</h1>
    <p>Your smart Naija A.I; √Är√≠y√≤ dey bring latest news!</p>
    
    <select id="news-category" onchange="fetchNaijaNews()">
        <option value="all">All News</option>
        <option value="politics">Politics</option>
        <option value="business">Business</option>
        <option value="sports">Sports</option>
        <option value="entertainment">Entertainment</option>
    </select>
    <div id="naija-news">
        <div id="news-loader" style="display: none; text-align: center;">
            <i class="fas fa-spinner fa-spin" style="font-size: 24px;"></i>
            <p>Loading news...</p>
        </div>
        <div id="news-content">Loading Naija News...</div>
    </div>
    <br>
    <button class="button" onclick="fetchNaijaNews()">Refresh News</button>
    
    <div class="chat-container" onclick="toggleChat()">
        <img src="chatbot.png" alt="Chatbot" style="width: 80px; height: 80px;">
        <span id="chatbot-text" style="font-size: 12px;">Click me</span>
    </div>

    <div id="chatbox" class="chatbox">
        <iframe src="chat.html"></iframe>
    </div>

    <audio id="background-music" loop autoplay>
        <source id="audio-source" src="" type="audio/mpeg">
    </audio>
    
    <script>
        function toggleChat() {
            let chatbox = document.getElementById("chatbox");
            if (chatbox.style.display === "none" || chatbox.style.display === "") {
                chatbox.style.display = "block";
            } else {
                chatbox.style.display = "none";
            }
        }
    </script>
</body>
</html>
